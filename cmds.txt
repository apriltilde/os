gcc -m32 -ffreestanding -fno-stack-protector -c kernel.c -o bin/kernel.o
gcc -m32 -ffreestanding -fno-stack-protector -c lib/core/print.c -o bin/print.o
gcc -m32 -ffreestanding -fno-stack-protector -c lib/core/string.c -o bin/string.o
gcc -m32 -ffreestanding -fno-stack-protector -c lib/keyboard/keyboard.c -o bin/keyboard.o
gcc -m32 -ffreestanding -fno-stack-protector -c lib/cmd.c -o bin/cmd.o
gcc -m32 -ffreestanding -fno-stack-protector -c lib/clock/clock.c -o bin/clock.o
gcc -m32 -ffreestanding -fno-stack-protector -c lib/math/math.c -o bin/math.o
gcc -m32 -ffreestanding -fno-stack-protector -c lib/mem/emem.c -o bin/mem.o
gcc -m32 -ffreestanding -fno-stack-protector -c lib/ata/ata.c -o bin/ata.o
gcc -m32 -ffreestanding -fno-stack-protector -c lib/ata/rw.c -o bin/rw.o
gcc -m32 -ffreestanding -fno-stack-protector -c lib/fs/fs.c -o bin/fs.o
gcc -m32 -ffreestanding -fno-stack-protector -c lib/fs/fsc.c -o bin/fsc.o
gcc -m32 -ffreestanding -fno-stack-protector -c lib/vga/vga.c -o bin/vga.o
gcc -m32 -ffreestanding -fno-stack-protector -c lib/mem/map.c -o bin/map.o
gcc -m32 -ffreestanding -fno-stack-protector -c lib/vga/font/font.c -o bin/font.o
gcc -m32 -ffreestanding -fno-stack-protector -c lib/core/intr.c -o bin/intr.o
gcc -m32 -ffreestanding -fno-stack-protector -c lib/core/gdt.c -o bin/gdt.o




nasm -f elf32 boot.s -o bin/boot.o
nasm -f elf32 lib/core/idtload.asm -o bin/idtload.o
nasm -f elf32 lib/core/intstub.asm -o bin/intstub.o
nasm -f elf32 lib/core/sti.asm -o bin/sti.o
nasm -f elf32 lib/core/gdt.asm -o bin/gdtasm.o

ld -m elf_i386 -T linker.ld -o kernel bin/boot.o bin/kernel.o bin/print.o bin/keyboard.o bin/cmd.o bin/clock.o bin/math.o bin/mem.o bin/ata.o bin/rw.o bin/string.o bin/fs.o bin/fsc.o bin/vga.o bin/map.o bin/font.o bin/intr.o bin/idtload.o bin/intstub.o bin/sti.o bin/gdt.o bin/gdtasm.o
mv kernel aprilos/boot
grub-mkrescue -o april.iso aprilos/
qemu-system-i386 -boot d -cdrom april.iso -m 256 -hda disk.img 
